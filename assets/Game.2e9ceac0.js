import{_ as e}from"./index.2b4f6a8b.js";import{o as l,c as a,g as t,h as s,u,i as n,j as v,F as o,k as r,w as c,v as i,n as p,l as d,m,p as f,t as g,q as x,s as h,a as y,f as b}from"./vendor.8ab312f7.js";const k={},I={class:"absolute top-0 left-0 w-full h-full flex justify-center items-center bg-black bg-opacity-70"},w=[t("div",{class:"bg-white rounded-md p-4"},[t("p",null,"欢迎进入游戏!"),t("p",null,"游戏规则是将顺序还原"),s(" (可点击关闭) ")],-1)];var C=e(k,[["render",function(e,t){return l(),a("div",I,w)}]]);const j=["onClick"],_=["src"];var q=e({emits:["gamePass","stepChange"],setup(e,{expose:s,emit:x}){const h=u(),y=n(3),b=n(!1),k=n([]),I=n(!0),w=n(null),C=n(0),q=n(0),S=n(0),M=n(0);v((()=>{T(),I.value=!1}));const P=()=>{const e=h.query;y.value=+e.num||3,b.value="1"===e.hasImg,w.value&&T(),k.value=[],k.value=new Array(y.value*y.value).fill(1).map(((e,l)=>({key:l,value:e,moveIndex:l}))),z(),k.value[k.value.length-1].value=0},T=()=>{C.value=w.value.clientWidth,q.value=w.value.clientHeight,S.value=(C.value-32)/y.value,M.value=(q.value-32)/y.value},$=()=>k.value.some((e=>e.moveIndex!==e.key)),z=()=>{const e=new Array(y.value*y.value).fill(0).map(((e,l)=>l));e.sort((()=>Math.random()>.5?-1:1)),e.forEach(((e,l)=>{k.value[l].moveIndex=e}));$()||z()},A=()=>{x("gamePass")};return P(),s({init:P}),(e,s)=>(l(),a("div",{class:"cnt h-full relative",ref_key:"cnt",ref:w},[(l(!0),a(o,null,r(k.value,((e,s)=>c((l(),a("div",{class:p(["box rounded-md overflow-hidden absolute",[e.value?"origin":"opacity-0"]]),onClick:l=>(e=>{const l=e.moveIndex,a=k.value.find((e=>!e.value)),t=a.moveIndex,s=()=>{x("stepChange"),[k.value[e.key].moveIndex,k.value[a.key].moveIndex]=[t,l]};if(parseInt(l/y.value)===parseInt(t/y.value)){if(console.log("相差："+(l-t)),1!==Math.abs(t-l))return void console.log("不相邻");s()}else{if(console.log("相差："+(l-t)),Math.abs(l-t)!==y.value)return void console.log("不相邻");s()}const u=$();console.log(u),u||A()})(e),style:d({transform:`translate(${e.moveIndex%y.value*(1/y.value)*C.value}px, ${parseInt(e.moveIndex/y.value)*(1/y.value)*q.value}px) `,width:S.value+"px",height:M.value+"px"})},[b.value?(l(),a("img",{key:0,class:"absolute",src:m("./assets/default.0a59f01d.jpg"),alt:"",style:d({width:C.value+"px",maxWidth:C.value+"px",height:q.value+"px",left:-e.key%y.value*(1/y.value)*C.value+"px",top:-parseInt(e.key/y.value)*(1/y.value)*q.value+"px"})},null,12,_)):f("",!0),t("p",{class:p(["absolute z-10 text-light-100 left-1/2 top-1/2",b.value?"opacity-60":""]),style:d({"font-size":180/y.value+"px"})},g(e.key+1),7)],14,j)),[[i,!I.value]]))),256))],512))}},[["__scopeId","data-v-5d33d5a6"]]);const S={class:"p-2 flex tool bg-gray-300"},M=["src"],P={class:"flex-1 text-center"},T=["src"];var $=e({props:{step:{type:[Number,Object],default:0}},emits:["reStart"],setup(e,{emit:s}){const u=e,n=x(),v=h((()=>null===u.step?"您已经成功啦":u.step?`您已经移动${u.step}次`:"您还没开始移动")),o=()=>{s("reStart")},r=()=>{n.go(-1)};return(e,s)=>(l(),a("div",S,[t("div",{onClick:r},[t("img",{src:m("./assets/back.5a49414b.png"),alt:""},null,8,M)]),t("div",P,g(m(v)),1),t("div",{class:"text-center btn",onClick:o},[t("img",{src:m("./assets/reStart.a5e618e0.png"),alt:""},null,8,T)])]))}},[["__scopeId","data-v-e8ee9452"]]);const z={class:"absolute top-0 left-0 w-full h-full flex justify-center items-center bg-black bg-opacity-30"},A={class:"bg-white rounded-md p-4"},N={props:{step:Number},setup(e){const s=u().query.num;return(u,n)=>(l(),a("div",z,[t("div",A,[t("p",null,"恭喜你通过"+g("5"===m(s)?"所有":"")+"关卡!",1),t("p",null,"使用步数："+g(e.step),1)])]))}},W={class:"relative flex flex-col w-full h-full"},E={class:"flex-1 p-4 py-8"},F={setup(e){const s=u(),v=x(),r=n(!0),c=n(0),i=n(null),p=n(null),d=n(!1),m=()=>{d.value=!1,r.value=!0,c.value=0,g(),i.value&&i.value.init()},g=()=>{p.value=setTimeout((()=>{}),2e3)},h=()=>{p.value&&clearTimeout(p.value),r.value=!1},k=()=>{c.value++},I=()=>{d.value=!0},w=()=>{m()},j=()=>{const e=s.query;let l=+e.num||3;const a=e.hasImg;5!==l?(v.replace({path:"/game/game",query:{hasImg:a,num:++l}}),setTimeout((()=>{m()}))):d.value=!1};return m(),(e,s)=>(l(),a(o,null,[t("div",W,[y($,{step:c.value,onReStart:w},null,8,["step"]),t("div",E,[y(q,{onStepChange:k,onGamePass:I,ref_key:"gameCnt",ref:i},null,512),d.value?(l(),b(N,{key:0,step:c.value,onClick:j},null,8,["step"])):f("",!0)])]),r.value?(l(),b(C,{key:0,onClick:h})):f("",!0)],64))}};export{F as default};
